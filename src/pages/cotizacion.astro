---
import MainLayout from '../layouts/MainLayout.astro';
import Breadcrumb from '../components/Breadcrumb.astro';
import QuoteItems from '../components/islands/QuoteItems.tsx';
import QuoteForm from '../components/islands/QuoteForm.tsx';
---

<MainLayout title="Cotización — Gel Chile" description="Solicita tu cotización personalizada de productos para puesta a tierra y protección eléctrica">
  <!-- Page Hero -->
  <section class="page-hero">
    <div class="container">
      <h1 class="page-hero-title">Solicitar Cotización</h1>
      <p class="page-hero-subtitle">
        Revisa los productos seleccionados y completa el formulario para recibir tu cotización
      </p>
    </div>
  </section>

  <Breadcrumb items={[{ label: 'Inicio', href: '/' }, { label: 'Cotización' }]} />

  <!-- Quote Section -->
  <section class="section quote-section">
    <div class="container">
      <div class="quote-layout">
        <div class="quote-items-column">
          <QuoteItems client:load />
        </div>
        <div class="quote-form-column">
          <QuoteForm client:load />
        </div>
      </div>
    </div>
  </section>

  <!-- How it Works -->
  <section class="section how-it-works">
    <div class="container">
      <h2 class="section-title">¿Cómo Funciona?</h2>
      <div class="steps-grid">
        <div class="step-card">
          <div class="step-number">1</div>
          <h3>Selecciona Productos</h3>
          <p>
            Navega por nuestro catálogo y agrega los productos que necesitas para tu
            sistema de puesta a tierra.
          </p>
        </div>
        <div class="step-card">
          <div class="step-number">2</div>
          <h3>Completa tus Datos</h3>
          <p>
            Ingresa tu información de contacto para que podamos enviarte la cotización
            personalizada.
          </p>
        </div>
        <div class="step-card">
          <div class="step-number">3</div>
          <h3>Recibe tu Cotización</h3>
          <p>
            En menos de 24 horas hábiles recibirás tu cotización detallada con precios
            y condiciones.
          </p>
        </div>
      </div>
    </div>
  </section>
</MainLayout>

<style>
  /* Page Hero */
  .page-hero {
    background: linear-gradient(135deg, var(--color-gray-900) 0%, var(--color-primary-dark) 100%);
    padding: calc(72px + var(--spacing-12)) 0 var(--spacing-12);
    text-align: center;
  }

  .page-hero-title {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-extrabold);
    color: var(--color-white);
    margin-bottom: var(--spacing-3);
  }

  .page-hero-subtitle {
    font-size: var(--font-size-lg);
    color: rgba(255, 255, 255, 0.8);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Quote Layout */
  .quote-layout {
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: var(--spacing-8);
    align-items: start;
  }

  .quote-form-column {
    position: sticky;
    top: calc(72px + var(--spacing-4));
  }

  /* How it Works */
  .how-it-works {
    background: var(--color-gray-50);
  }

  .steps-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-6);
    margin-top: var(--spacing-10);
  }

  .step-card {
    text-align: center;
    padding: var(--spacing-6);
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-lg);
    transition: transform var(--transition-base), box-shadow var(--transition-base);
  }

  .step-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-card-hover);
  }

  .step-number {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--color-white);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin: 0 auto var(--spacing-4);
  }

  .step-card h3 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-gray-900);
    margin-bottom: var(--spacing-2);
  }

  .step-card p {
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    line-height: 1.6;
  }

  /* Dark Mode */
  :global([data-theme="dark"]) .page-hero {
    background: linear-gradient(135deg, #0a1628 0%, var(--color-gray-900) 100%);
  }

  :global([data-theme="dark"]) .how-it-works {
    background: var(--color-gray-900);
  }

  :global([data-theme="dark"]) .step-card {
    background: var(--color-gray-800);
    border-color: var(--color-gray-700);
  }

  :global([data-theme="dark"]) .step-card h3 {
    color: var(--color-white);
  }

  :global([data-theme="dark"]) .step-card p {
    color: var(--color-gray-400);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .quote-layout {
      grid-template-columns: 1fr;
    }

    .quote-form-column {
      position: static;
    }
  }

  @media (max-width: 768px) {
    .page-hero {
      padding: calc(64px + var(--spacing-8)) 0 var(--spacing-8);
    }

    .page-hero-title {
      font-size: var(--font-size-2xl);
    }

    .steps-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
